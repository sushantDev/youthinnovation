var muwakaba_circular_rating={drawArc:function(a){var e,b;e=document.getElementById(a.elementId+".canvas");b=e.getContext("2d");a=document.getElementById(a.elementId+".main_holder").clientWidth;e.width=a;e.height=a;b.save();b.translate(-a,0);b.beginPath();b.rect(0,0,a,a);b.closePath();b.shadowOffsetX=a;b.shadowColor="rgba(255,255,255,1)";b.shadowBlur=0;b.fill();b.translate(a,0);b.restore();b.save();b.beginPath();b.arc(0.5*a,0.5*a,a/2,0,2*Math.PI);b.closePath();b.clip();b.clearRect(0,0,a,a);b.restore()},
drawSVG:function(a){var e='<svg  id="'+a.elementId+'.svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none" width="100%" height="100%" class="mkcr-svg">',e=e+('<defs><mask id="'+a.elementId+'.hole"><rect width="100%" height="100%" fill="white"/><circle r="'+a.holder_size.width.replace(/[^0-9]/g,"")/2+'" cx="'+a.holder_size.width.replace(/[^0-9]/g,"")/2+'" cy="'+a.holder_size.height.replace(/[^0-9]/g,"")/2+'" fill="black"/></mask></defs><rect width="100%" height="100%" fill="white" mask="url(#'+
a.elementId+'.hole)"/>');return e+"</svg>"},build:function(a){this.render(a);"Opera"==br.browser&&15>br.version&&(d(a.elementId+".svg").style.display="");"Safari"==br.browser&&5>=br.version&&muwakaba_circular_rating.drawArc(a);void 0!=a.result&&this.loadResult(a);this.handlers(a)},render:function(a){var e=c("div","mkcr-main_holder mkcr-circle");e.id=a.elementId+".main_holder";e.style.height=a.holder_size.height;e.style.width=a.holder_size.width;for(var b=0;5>b;b++){var f=c("div","mkcr-arc");f.id=
a.elementId+"."+b;f.style.backgroundColor=a.stroke_background_colors.original;e.appendChild(f)}b=c("div","mkcr-mask mkcr-full mkcr-circle");b.id=a.elementId+"mask";b.style.backgroundImage="url("+a.icons_folder_name+"/"+a.icon_name+")";b.style.backgroundColor=a.icon_background_color;b.style.backgroundSize=a.icon_size.width+" "+a.icon_size.height;a.stroke_thickness=100-a.stroke_thickness;b.style.height=a.stroke_thickness+"%";b.style.width=a.stroke_thickness+"%";b.style.top=(100-a.stroke_thickness)/
2+"%";b.style.left=(100-a.stroke_thickness)/2+"%";b.style.webkitTransform="rotate(-180deg)";b.style.mozTransform="rotate(-180deg)";b.style.msTransform="rotate(-180deg)";b.style.oTransform="rotate(-180deg)";b.style.OTransform="rotate(-180deg)";b.style.transform="rotate(-180deg)";f=c("canvas","mkcr-canvas mkcr-full");f.id=a.elementId+".canvas";e.appendChild(b);"Safari"==br.browser&&5>=br.version&&e.appendChild(f);b=muwakaba_circular_rating.drawSVG(a);e.innerHTML+=b;d(a.elementId).appendChild(e)},loadResult:function(a){muwakaba_circular_rating.lightPrev(a,
0,a.result,"sticky_color");muwakaba_circular_rating.rotateLike(a,a.result);muwakaba_circular_rating[a.elementId]=a.result},handlers:function(a){if(1!=a.read_only)for(var e=0;5>e;e++)muwakaba_circular_rating.onclickHandler(a,e),muwakaba_circular_rating.onmouseHandler(a,e)},onclickHandler:function(a,e){d(a.elementId+"."+e).onclick=function(){var b=a.result,e=this.id.split(".")[1];muwakaba_circular_rating.unlightNext(a,b,e,"sticky_color");muwakaba_circular_rating.mouseout(a,this);b=0;e=this.id.split(".")[1];
muwakaba_circular_rating.unlightPrev(a,b,e);a.result=parseInt(e)+1;muwakaba_circular_rating.loadResult(a);muwakaba_circular_rating[a.elementId+"have_clicked"]=!0;muwakaba_circular_rating.rotateLike(a,a.result);muwakaba_circular_rating[a.elementId]=a.result;a.onClick(a.elementId,a.result)}},rotateLike:function(a,e){d(a.elementId+"mask").style.webkitTransform="rotate("+(-180+36*e)+"deg)";d(a.elementId+"mask").style.mozTransform="rotate("+(-180+36*e)+"deg)";d(a.elementId+"mask").style.msTransform="rotate("+
(-180+36*e)+"deg)";d(a.elementId+"mask").style.oTransform="rotate("+(-180+36*e)+"deg)";d(a.elementId+"mask").style.OTransform="rotate("+(-180+36*e)+"deg)";d(a.elementId+"mask").style.transform="rotate("+(-180+36*e)+"deg)"},onmouseHandler:function(a,e){var b=d(a.elementId+"."+e);b.style.cursor="pointer";b.onmouseover=function(){var b=a.result,e=this.id.split(".")[1];muwakaba_circular_rating.unlightNext(a,b,e,"sticky_color");muwakaba_circular_rating.mouseover(a,this);b=0;e=this.id.split(".")[1];muwakaba_circular_rating.lightPrev(a,
b,e);muwakaba_circular_rating.rotateLike(a,parseInt(e)+1)};b.onmouseout=function(){var b=this.id.split(".")[1];a.result-1==b&&muwakaba_circular_rating[a.elementId+"have_clicked"]?muwakaba_circular_rating[a.elementId+"have_clicked"]=!1:(muwakaba_circular_rating.mouseout(a,this),b=this.id.split(".")[1],muwakaba_circular_rating.unlightPrev(a,0,b),muwakaba_circular_rating.loadResult(a))}},mouseover:function(a,e,b){e.setAttribute("highlight",1);"sticky_color"==b?animate.fade({elId:e.id,step:1,speed:4,
from:{hex:a.stroke_background_colors.original},to:{hex:a.stroke_background_colors.sticky}}):animate.fade({elId:e.id,step:1,speed:4,from:{hex:a.stroke_background_colors.original},to:{hex:a.stroke_background_colors.hover}})},mouseout:function(a,e,b){0!=e.getAttribute("highlight")&&(e.setAttribute("highlight",0),"sticky_color"==b?animate.fade({elId:e.id,step:1,speed:4,from:{hex:a.stroke_background_colors.sticky},to:{hex:a.stroke_background_colors.original}}):animate.fade({elId:e.id,step:1,speed:4,from:{hex:a.stroke_background_colors.hover},
to:{hex:a.stroke_background_colors.original}}))},lightPrev:function(a,e,b,f){for(;e<b;e++){var g=d(a.elementId+"."+e);this.mouseover(a,g,f)}},unlightPrev:function(a,e,b){for(;e<b;e++){var f=d(a.elementId+"."+e);this.mouseout(a,f)}},unlightNext:function(a,e,b,f){for(;b<e;b++){var g=d(a.elementId+"."+b);this.mouseout(a,g,f)}}};
